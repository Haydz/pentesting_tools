# convert_usernames.py
# Converts a list of usernames in the "FirstName LastName" format to "FLastname"
# Ex: Converting TheHarvester's output to usernames
# 10/20/2016 by Jayme Hancock

#!/usr/bin/env python
import getopt
import sys

def formatNames(infile, outfile):
    #FLastName
    with open(infile, "r+") as r:
        for name in r:
            full_name = name.split(" ")
            first_name = full_name[0]
            last_name = full_name[1]
            formatted_name = first_name[0] + last_name
            with open(outfile + "_FLastname", "a") as completed_file:
                completed_file.write(formatted_name)
            completed_file.close()
        r.close()
    #FirstLastname
    with open(infile, "r+") as r:
        for name in r:
            full_name = name.split(" ")
            first_name = full_name[0]
            last_name = full_name[1]
            formatted_name = first_name + last_name
            with open(outfile  + "_FirstLastname", "a") as completed_file:
                completed_file.write(formatted_name)
            completed_file.close()
        r.close()
    #F.Lastname
    with open(infile, "r+") as r:
        for name in r:
            full_name = name.split(" ")
            first_name = full_name[0]
            last_name = full_name[1]
            formatted_name = first_name + "." + last_name
            with open(outfile+ "_F.Lastname", "a") as completed_file:
                completed_file.write(formatted_name)
            completed_file.close()
        r.close()
    #lastnameF
    with open(infile, "r+") as r:
        for name in r:
            full_name = name.split(" ")
            first_name = full_name[0]
            last_name = full_name[1]
            formatted_name = last_name + first_name[0]
            with open(outfile+ "_lastnameF", "a") as completed_file:
                completed_file.write(formatted_name)
            completed_file.close()
        r.close()



opts, args = getopt.getopt(sys.argv[1:],"i:o:")
for o, a in opts:
        if o == '-i':
            infile = a
        if o == '-o':
            outfile = a

try:
    formatNames(infile, outfile)

except: 
    print "[*] Format Names. Take a list of names and convert to the FLastname convention."
    print "[*] Example: John Smith becomes JSmith"
    print "[*] Usage: %s -i input.txt -o output.txt" %(sys.argv[0])
